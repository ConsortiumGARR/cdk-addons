name: kube-controller-manager
version: 'KUBE_VERSION'
summary: kube-controller-manager
description: kube-controller-manager
grade: devel
confinement: strict

apps:
  daemon:
    command: run-with-config-args kube-controller-manager
    daemon: simple
    plugs:
        - network
        - network-bind
        - home
  kube-controller-manager:
    command: kube-controller-manager
    plugs:
        - network
        - network-bind
        - home
parts:
  kube-controller-manager:
    plugin: dump
    source: .
    prepare: |
      set -eu
      $KUBE_SNAP_ROOT/build-scripts/copy-kube-bin kube-controller-manager .
      cp -r $KUBE_SNAP_ROOT/shared/* .
      $KUBE_SNAP_ROOT/build-scripts/generate-configure-hook kube-controller-manager
