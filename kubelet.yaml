name: kubelet
version: 'KUBE_VERSION'
summary: kubelet is the primary “node agent” that runs on each node in Kubernetes.
description: |
  The kubelet is the primary “node agent” that runs on each node. The kubelet
  works in terms of a PodSpec. A PodSpec is a YAML or JSON object that describes
  a pod. The kubelet takes a set of PodSpecs that are provided through various
  mechanisms (primarily through the apiserver) and ensures that the containers
  described in those PodSpecs are running and healthy. The kubelet doesn’t
  manage containers which were not created by Kubernetes.
grade: devel
confinement: strict
apps:
  daemon:
    command: run-with-config-args kubelet
    daemon: simple
    plugs:
      - home
      - network
      - network-bind
      - docker
      - firewall-control
      - network-observe
      - hardware-observe
      - docker-support
  kubelet:
    command: kubelet
    plugs:
      - home
      - network
      - network-bind
      - docker
      - firewall-control
      - network-observe
      - hardware-observe
      - docker-support
parts:
  kubelet:
    plugin: dump
    source: .
    prepare: |
      set -eu
      cp $KUBE_SNAP_BINS/kubelet .
      cp -r $KUBE_SNAP_ROOT/shared/* .
      $KUBE_SNAP_ROOT/build-scripts/generate-configure-hook kubelet

